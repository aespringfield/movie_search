var myApp=angular.module("myApp",[]);myApp.controller("FormController",["$scope","MovieService",function(a,b){a.getMovieData=b.getMovieData,a.searchError=b.searchError,a.displaySearchError=b.displaySearchError,a.addToFavorites=b.addToFavorites,a.getFavorites=b.getFavorites,a.currentMovie={display:!1,titleInput:"",data:void 0,reset:function(){this.display=!1,delete this.data}}}]),myApp.controller("DisplayController",["$scope","MovieService",function(a,b){a.movies=b.movies,a.deleteFromFavorites=b.deleteFromFavorites,a.getFavorites=b.getFavorites,a.getFavorites()}]),myApp.factory("MovieService",["$http",function(a){var b={favoritesList:[]},c={display:!1,msg:"No movie found"};return displaySearchError=function(a){c.display=!!a},{movies:b,searchError:c,getMovieData:function(b){displaySearchError(!1),a.get("http://www.omdbapi.com/?t="+b.titleInput+"&type=movie&y=&plot=short&r=json").then(function(a){console.log(a.data),"True"==a.data.Response?(b.titleInput="",b.data=a.data,b.display=!0):(b.reset(),displaySearchError(!0))})},addToFavorites:function(b,c){a.post("/movie",b.data).then(function(a){console.log(a),c()}),b.reset()},getFavorites:function(){a.get("/movie").then(function(a){b.favoritesList=a.data})},deleteFromFavorites:function(c,d){var e=b.favoritesList[c]._id;a.delete("/movie/"+e).then(function(a){console.log(a),d()})}}}]);